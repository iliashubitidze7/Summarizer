@model Form

@{
    ViewBag.Title = "Create New Form";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-5">
    <h2 class="text-primary fw-bold">Edit Form</h2>

    <div class="card shadow-sm">
        <div class="card-body">
            <form asp-action="Edit" asp-controller="Form" method="post" class="needs-validation" novalidate>
                <input asp-for="FormId" hidden />
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                <!-- Tabs Navigation -->
                <ul class="nav nav-tabs" id="formTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="basic-tab" data-bs-toggle="tab" data-bs-target="#basic" type="button" role="tab">Basic Info</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="contract-tab" data-bs-toggle="tab" data-bs-target="#contract" type="button" role="tab">Contract Details</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="delivery-tab" data-bs-toggle="tab" data-bs-target="#delivery" type="button" role="tab">Delivery & Notes</button>
                    </li>
                </ul>

                <!-- Tabs Content -->
                <div class="tab-content mt-3" id="formTabsContent">
                    <!-- Tab 1: Basic Info -->
                    <div class="tab-pane fade show active" id="basic" role="tabpanel">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label asp-for="PersonName" class="form-label">Initiated Person</label>
                                <input asp-for="PersonName" class="form-control" />
                                <span asp-validation-for="PersonName" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="DepartmentName" class="form-label">Department</label>
                                <select asp-for="DepartmentName" asp-items="ViewBag.Departments" class="form-control">
                                    <option value="">Select Department</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="RelevantDirectorName" class="form-label">Relevant Director</label>
                                <input asp-for="RelevantDirectorName" class="form-control" />
                                <span asp-validation-for="RelevantDirectorName" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="IdentificationCode" class="form-label">Identification Code</label>
                                <input asp-for="IdentificationCode" class="form-control" />
                                <span asp-validation-for="IdentificationCode" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="SupplierMail" class="form-label">Supplier Mail</label>
                                <input asp-for="SupplierMail" class="form-control" />
                                <span asp-validation-for="SupplierMail" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="text-end mt-4">
                            <button type="button" class="btn btn-primary next-tab">Next</button>
                        </div>
                    </div>

                    <!-- Tab 2: Contract Details -->
                    <div class="tab-pane fade" id="contract" role="tabpanel">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label asp-for="Subject" class="form-label">Subject</label>
                                <input asp-for="Subject" class="form-control" />
                                <span asp-validation-for="Subject" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="ContractType" class="form-label">Contract Type</label>
                                <select asp-for="ContractType" asp-items="ViewBag.ContractTypes" class="form-control">
                                    <option value="">Select Contract Type</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="ContractStartingDate" class="form-label">Contract Starting Date</label>
                                <input asp-for="ContractStartingDate" type="date" class="form-control" />
                                <span asp-validation-for="ContractStartingDate" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="ContractEndDate" class="form-label">Contract End Date</label>
                                <input asp-for="ContractEndDate" type="date" class="form-control" />
                                <span asp-validation-for="ContractEndDate" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="Amount" class="form-label">Amount</label>
                                <input asp-for="Amount" class="form-control" />
                                <span asp-validation-for="Amount" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="Currency" class="form-label">Currency</label>
                                <select asp-for="Currency" asp-items="ViewBag.Currency" class="form-control">
                                    <option value="">Select Contract Type</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="PaymentTerm" class="form-label">Payment Term</label>
                                <input asp-for="PaymentTerm" class="form-control" />
                                <span asp-validation-for="PaymentTerm" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input asp-for="PayTerm60" class="form-check-input" type="checkbox" />
                                    <label asp-for="PayTerm60" class="form-check-label">Payment Term les then 60 days</label>
                                </div>
                                <span asp-validation-for="PayTerm60" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input asp-for="IncludeTaxes" class="form-check-input" type="checkbox" />
                                    <label asp-for="IncludeTaxes" class="form-check-label">Includes Taxes</label>
                                </div>
                                <span asp-validation-for="IncludeTaxes" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between mt-4">
                            <button type="button" class="btn btn-secondary prev-tab">Previous</button>
                            <button type="button" class="btn btn-primary next-tab">Next</button>
                        </div>
                    </div>

                    <!-- Tab 3: Delivery and Notes -->
                    <div class="tab-pane fade" id="delivery" role="tabpanel">
                        <div class="row g-3">

                            <div class="col-md-6">
                                <label asp-for="CompletionOrDeliveryDate" class="form-label">Completion/Delivery Date</label>
                                <input asp-for="CompletionOrDeliveryDate" type="date" class="form-control" />
                                <span asp-validation-for="CompletionOrDeliveryDate" class="text-danger"></span>
                            </div>
                            <div class="col-md-12">
                                <label asp-for="DeliveryAddress" class="form-label">Delivery Address</label>
                                <input asp-for="DeliveryAddress" class="form-control" />
                                <span asp-validation-for="DeliveryAddress" class="text-danger"></span>
                            </div>
                            <div class="col-md-12">
                                <label asp-for="Note" class="form-label">Note</label>
                                <textarea asp-for="Note" class="form-control" rows="5"></textarea>
                                <span asp-validation-for="Note" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between mt-4">
                            <button type="button" class="btn btn-secondary prev-tab">Previous</button>
                            <button type="submit" class="btn btn-primary">Edit Form</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Include Bootstrap 5 JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const tabs = document.querySelectorAll(".nav-link");
        const nextButtons = document.querySelectorAll(".next-tab");
        const prevButtons = document.querySelectorAll(".prev-tab");

        function switchTab(currentTab, direction) {
            let index = [...tabs].findIndex(tab => tab.id === currentTab.id);
            let newIndex = index + direction;

            if (newIndex >= 0 && newIndex < tabs.length) {
                tabs[newIndex].click(); // Switch to the next or previous tab
            }
        }

        nextButtons.forEach(button => {
            button.addEventListener("click", function () {
                let currentTab = document.querySelector(".nav-link.active");
                switchTab(currentTab, 1);
            });
        });

        prevButtons.forEach(button => {
            button.addEventListener("click", function () {
                let currentTab = document.querySelector(".nav-link.active");
                switchTab(currentTab, -1);
            });
        });
    });
</script>